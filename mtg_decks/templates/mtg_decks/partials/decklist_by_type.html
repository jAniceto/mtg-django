<div class="row">
    <!-- Decklist (first column)-->
    <div class="col-md-4">
        <table style="width:100%">
            {% for type, mainboard_items in deck.get_categorized_mainboard.items %}
                {% if mainboard_items %}
                    <tr>
                        <td colspan="3">
                            <i class="ms ms-{{ type }}"></i>
                            <span class="fw-semibold">{{ type|title }}</span>
                        </td>
                    </tr>

                    {% for mainboard_item in mainboard_items %}
                        <tr>
                            <td>{{ mainboard_item.quantity }}</td>
                            <td>
                                <div class="position-relative">
                                    <a href="#" class="link-body-emphasis text-decoration-none hover-link">
                                        {{ mainboard_item.card.name }}
                                    </a>
                                    <div class="hover-image">
                                        <img src="{{ mainboard_item.card.img_url }}" alt="{{ mainboard_item.card.name }} image">
                                    </div>
                                </div>
                            </td>
                            <td class="text-end">{{ mainboard_item.card.get_mana_cost_html|safe }}</td>
                        </tr>

                    {% endfor %}
                
                {% endif %}

    <!-- Break first column and continue in the second column -->
    {% if type == deck.get_categorized_mainboard_split_type %}
        </table>
    </div>
    <div class="col-md-4">
        <table style="width:100%">
            {% endif %}
                <!-- forloop continues placing stuff here -->
            {% endfor %}
        </table>

        <!-- Sideboard (always in a new table in the second column) -->
        {% if deck.cardsideboard_set.all %}
            <h5 class="mt-2">Sideboard</h5>
            <table style="width:100%">
                {% for sideboard_item in deck.cardsideboard_set.all %}
                    <tr>
                        <td>{{ sideboard_item.quantity }}</td>
                        <td>
                            <div class="position-relative">
                                <a href="#" class="link-body-emphasis text-decoration-none hover-link">
                                    {{ sideboard_item.card.name }}
                                </a>
                                <div class="hover-image">
                                    <!-- Card image -->
                                    <img src="{{ sideboard_item.card.img_url }}" alt="{{ sideboard_item.card.name }} image">
                                </div>
                            </div>
                        </td>
                        <td class="text-end">{{ sideboard_item.card.get_mana_cost_html|safe }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% endif %}
    </div>
            

    <!-- Analysis and actions -->
    <div class="col-md-4">
        <!-- CMC plot -->
        <div class="d-none d-md-block">
            {{ deck.cmc_chart|safe }}
        </div>

        <!-- Info and actions -->
        <div class="d-grid gap-2 mt-4 d-md-flex justify-content-md-center">
            <a class="btn btn-outline-secondary w-100" href="{% url 'download_deck_txt' deck.pk %}" role="button">Download .txt</a>
            <a class="btn btn-outline-secondary w-100" href="#" role="button">Copy to clipboard</a>
        </div>

    </div>
    
</div>
