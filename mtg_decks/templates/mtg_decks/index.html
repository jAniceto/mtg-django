{% extends "mtg_decks/base.html" %}
{% load static %}

{% block content %}
<div class="container">

    {% for deck in decks %}

    <div class="mt-4">

        <!-- Header -->
        <div class="row">
            <div class="col-md-8">
                <h1>
                    {{ deck.name }}

                    {% if deck.get_days_since_created < 7 %} <!-- 7 days (1 week) -->
                        <span class="badge text-bg-success align-middle fs-5">New</span>
                    {% elif deck.get_days_since_updated < 7 %}
                        <span class="badge text-bg-info">Updated</span>
                    {% endif %}
                </h1>
            </div>
            <div class="col-md-4 d-none d-lg-block">
                <h1 class="text-end">
                    {% for color in deck.get_colors %}
                    <i class="ms ms-cost ms-{{ color }}"></i>
                    {% endfor %}
                </h1>
            </div>
        </div>
        <div class="row">
            <div class="col">

            </div>
        </div>

        <!-- Deck info -->
        <div class="row">
            <!-- Decklist (part 1)-->
            <div class="col-md-3">
                <table style="width:100%">
                    {% for mainboard_item in deck.cardmainboard_set.all %}
                        <tr>
                            <td>{{ mainboard_item.quantity }}</td>
                            <td>
                                <div class="position-relative">
                                    <a href="#" class="link-body-emphasis text-decoration-none hover-link">
                                        {{ mainboard_item.card.name }}
                                    </a>
                                    <div class="hover-image">
                                        <!-- Card image -->
                                        <img src="{{ mainboard_item.card.img_url }}" alt="{{ mainboard_item.card.name }} image">
                                    </div>
                                </div>
                            </td>
                            <td class="text-end">{{ mainboard_item.card.get_mana_cost_html|safe }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>

            <!-- Decklist (part 2)-->
            <div class="col-md-3">
                <h4>Sideboard</h4>
                <table style="width:100%">
                    {% for sideboard_item in deck.cardsideboard_set.all %}
                        <tr>
                            <td>{{ sideboard_item.quantity }}</td>
                            <td>
                                <div class="position-relative">
                                    <a href="#" class="link-body-emphasis text-decoration-none hover-link">
                                        {{ sideboard_item.card.name }}
                                    </a>
                                    <div class="hover-image">
                                        <!-- Card image -->
                                        <img src="{{ sideboard_item.card.img_url }}" alt="{{ sideboard_item.card.name }} image">
                                    </div>
                                </div>
                            </td>
                            <td class="text-end">{{ sideboard_item.card.get_mana_cost_html|safe }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>

            <!-- Analysis-->
            <div class="col-md-4">
                <!-- CMC plot -->
                <div>
                    {{ deck.cmc_chart|safe }}
                </div>
            </div>
            
            <!-- Actions-->
            <div class="col-md-3">

            </div>
        </div>

    </div>


    <div class="my-5">
        <hr/>
    </div>

    {% endfor %}

</div>
{% endblock %}